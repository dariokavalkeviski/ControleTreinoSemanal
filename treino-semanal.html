<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Treino Semanal</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #1f1c18 0%, #3a2f0f 100%);
      color: #f4f1de;
      margin: 0;
      padding: 0 20px 40px 20px;
      max-width: 960px;
      margin-left: auto;
      margin-right: auto;
      user-select: none;
    }
    header {
      display: flex;
      align-items: center;
      margin: 20px 0;
      gap: 15px;
    }
    header img {
      height: 60px;
      width: 60px;
      object-fit: contain;
      user-select: none;
    }
    header h1 {
      font-weight: 700;
      font-size: 2.2rem;
      color: #f2cc8f;
      text-shadow: 2px 2px 6px #bb9457;
      user-select: text;
    }
    section h2 {
      color: #f2cc8f;
      border-bottom: 2px solid #bb9457;
      padding-bottom: 4px;
      margin-top: 40px;
      user-select: text;
    }
    table {
      border-collapse: collapse;
      width: 100%;
      margin-top: 10px;
      background: #2f2b23;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 0 15px #bb9457bb;
      user-select: none;
    }
    th, td {
      border: 1px solid #bb9457;
      padding: 10px 12px;
      text-align: center;
      font-weight: 600;
      min-width: 50px;
      word-break: break-word;
    }
    th {
      background-color: #bb9457;
      color: #2f2b23;
      font-size: 1rem;
      user-select: text;
    }
    td[contenteditable="true"] {
      background-color: #605841;
      color: #f4f1de;
      cursor: text;
      font-weight: 500;
      transition: background-color 0.2s ease;
    }
    td[contenteditable="true"]:focus {
      outline: 2px solid #f2cc8f;
      background-color: #897a4b;
    }
    button {
      padding: 7px 14px;
      background-color: #f2cc8f;
      border: none;
      border-radius: 4px;
      font-weight: 700;
      color: #3a2f0f;
      cursor: pointer;
      box-shadow: 1px 1px 4px #bb9457;
      transition: background-color 0.3s ease, color 0.3s ease;
      user-select: none;
    }
    button:hover {
      background-color: #bb9457;
      color: #f4f1de;
      box-shadow: 2px 2px 8px #f2cc8f;
    }
    #btnReset {
      margin-top: 10px;
      display: block;
      margin-left: auto;
      margin-bottom: 20px;
    }
    @media (max-width: 700px) {
      body {
        padding: 10px;
      }
      header h1 {
        font-size: 1.6rem;
      }
      table, th, td {
        font-size: 0.85rem;
      }
      th, td {
        padding: 6px 8px;
      }
      header img {
        height: 45px;
        width: 45px;
      }
      button {
        padding: 5px 10px;
        font-size: 0.9rem;
      }
    }
  </style>
</head>
<body>
  <header>
    <img src="https://cdn-icons-png.flaticon.com/512/3063/3063762.png" alt="Logo Esportivo" />
    <h1>Plano de Treino Semanal</h1>
  </header>

  <button id="btnReset">Resetar Treino</button>

  <div id="treinosContainer"></div>

  <script>
    const dadosOriginais = {
      A: [
        ['Supino reto máquina/barra', '3', '12', ''],
        ['Supino inclinado halteres', '3', '12', ''],
        ['Crucifixo máquina', '3', '15', ''],
        ['Flexão apoiada no banco', '3', '10', ''],
        ['Tríceps corda (pulley)', '3', '12', ''],
        ['Tríceps testa halteres', '3', '12', ''],
        ['Tríceps mergulho banco', '3', '10', ''],
        ['Elevação frontal', '3', '12', ''],
        ['Elevação lateral', '3', '12', ''],
        ['Prancha', '3', '30-45s', '—']
      ],
      B: [
        ['Puxada frontal aberta', '3', '12', ''],
        ['Remada baixa máquina', '3', '12', ''],
        ['Remada unilateral halter', '3', '12', ''],
        ['Puxada neutra polia', '3', '12', ''],
        ['Rosca direta barra', '3', '12', ''],
        ['Rosca alternada halteres', '3', '12', ''],
        ['Rosca martelo', '3', '12', ''],
        ['Face pull polia', '3', '15', ''],
        ['Encolhimento ombros', '3', '15', ''],
        ['Superman no colchonete', '3', '12', '—']
      ],
      C: [
        ['Leg press leve', '3', '12', ''],
        ['Mesa flexora leve', '3', '12', ''],
        ['Cadeira extensora leve', '3', '12', ''],
        ['Panturrilha sentado', '3', '15', ''],
        ['Glúteo 4 apoios polia', '3', '12', ''],
        ['Adução máquina', '3', '15', ''],
        ['Abdução máquina', '3', '15', ''],
        ['Abdominal infra banco', '3', '15', '—'],
        ['Prancha lateral', '3', '20-30s', '—'],
        ['Ponte de quadril', '3', '12', '']
      ],
      D: [
        ['Supino reto halter', '3', '12', ''],
        ['Supino inclinado máquina', '3', '12', ''],
        ['Crucifixo inclinado', '3', '12', ''],
        ['Peck deck', '3', '12', ''],
        ['Desenvolvimento máquina', '3', '12', ''],
        ['Elevação lateral halter', '3', '12', ''],
        ['Elevação frontal polia', '3', '12', ''],
        ['Encolhimento halteres', '3', '15', ''],
        ['Tríceps pulley', '3', '12', ''],
        ['Abdominal reto máquina', '3', '15', '—']
      ],
      E: [
        ['Barra fixa assistida (ou puxada)', '3', '10', ''],
        ['Remada curvada barra', '3', '12', ''],
        ['Puxada supinada polia', '3', '12', ''],
        ['Remada alta polia', '3', '12', ''],
        ['Rosca Scott (barra ou máquina)', '3', '12', ''],
        ['Rosca concentração', '3', '12', ''],
        ['Rosca inversa barra', '3', '12', ''],
        ['Encolhimento halteres', '3', '15', ''],
        ['Face pull corda', '3', '15', ''],
        ['Prancha abdominal', '3', '45s', '—']
      ],
      F: [
        ['Agachamento barra guiada', '3', '12', ''],
        ['Leg press', '3', '12', ''],
        ['Cadeira extensora', '3', '12', ''],
        ['Mesa flexora', '3', '12', ''],
        ['Stiff com halteres', '3', '12', ''],
        ['Panturrilha em pé', '3', '15', '']
      ]
    };

    const nomesTreino = {
      A: 'Treino A - Segunda-Feira (Peito e Costas)',
      B: 'Treino B - Terça-Feira (Costas e Bíceps)',
      C: 'Treino C - Quarta-Feira (Pernas)',
      D: 'Treino D - Quinta-Feira (Peito e Ombros)',
      E: 'Treino E - Sexta-Feira (Costas e Bíceps)',
      F: 'Treino F - Sábado (Pernas)'
    };

    const container = document.getElementById('treinosContainer');

    function criarTabela(treinoId, linhas) {
      const section = document.createElement('section');
      const h2 = document.createElement('h2');
      h2.textContent = nomesTreino[treinoId];
      section.appendChild(h2);

      const table = document.createElement('table');
      table.setAttribute('data-treino', treinoId);

      const thead = document.createElement('thead');
      thead.innerHTML = `<tr>
        <th>Exercício</th>
        <th>Séries</th>
        <th>Repetições</th>
        <th>Peso (kg)</th>
        <th>Ações</th>
      </tr>`;
      table.appendChild(thead);

      const tbody = document.createElement('tbody');

      linhas.forEach(celulas => {
        const tr = document.createElement('tr');
        celulas.forEach(texto => {
          const td = document.createElement('td');
          td.contentEditable = true;
          td.innerText = texto;
          tr.appendChild(td);
        });
        const tdAcao = document.createElement('td');
        const btn = document.createElement('button');
        btn.classList.add('btnConcluir');
        btn.textContent = 'Concluído';
        btn.onclick = () => {
          tr.remove();
          salvarEstado();
        };
        tdAcao.appendChild(btn);
        tr.appendChild(tdAcao);
        tbody.appendChild(tr);
      });

      table.appendChild(tbody);
      section.appendChild(table);
      container.appendChild(section);
    }

    function salvarEstado() {
      const treinos = {};
      document.querySelectorAll('table[data-treino]').forEach(table => {
        const treinoId = table.getAttribute('data-treino');
        const linhas = [];
        table.querySelectorAll('tbody tr').forEach(tr => {
          const células = Array.from(tr.querySelectorAll('td[contenteditable="true"]'));
          if (células.length === 0) return;
          const valores = células.map(td => td.innerText.trim());
          linhas.push(valores);
        });
        treinos[treinoId] = linhas;
      });
      localStorage.setItem('planotreino', JSON.stringify(treinos));
    }

    function carregarEstado() {
      const data = localStorage.getItem('planotreino');
      return data ? JSON.parse(data) : null;
    }

    function construirTabelas() {
      container.innerHTML = '';

      const dadosSalvos = carregarEstado();

      for (const treinoId of Object.keys(dadosOriginais)) {
        const originais = dadosOriginais[treinoId];
        const salvos = dadosSalvos ? dadosSalvos[treinoId] || [] : [];

        const mapaSalvo = new Map();
        salvos.forEach((linhaEditada, idx) => {
          mapaSalvo.set(idx, linhaEditada);
        });

        const linhasParaExibir = originais.map((linhaOriginal, idx) => {
          return mapaSalvo.has(idx) ? mapaSalvo.get(idx) : linhaOriginal;
        });

        criarTabela(treinoId, linhasParaExibir);
      }

      adicionarListeners();
    }

    function removerLinha(botao) {
      const linha = botao.closest('tr');
      linha.remove();
      salvarEstado();
    }

    function adicionarListeners() {
      document.querySelectorAll('td[contenteditable="true"]').forEach(td => {
        td.removeEventListener('input', salvarEstado);
        td.addEventListener('input', salvarEstado);
      });
      document.querySelectorAll('.btnConcluir').forEach(btn => {
        btn.removeEventListener('click', event => removerLinha(event.target));
        btn.addEventListener('click', () => removerLinha(btn));
      });
    }

    function resetarTreino() {
      construirTabelas();
      alert('Linhas removidas foram repostas mantendo suas edições.');
    }

    document.getElementById('btnReset').addEventListener('click', resetarTreino);

    window.onload = construirTabelas;
  </script>
</body>
</html>
